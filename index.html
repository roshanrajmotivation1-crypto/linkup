function loadMessages() {
    db.ref("messages").on("child_added", (snapshot) => {
        const data = snapshot.val();
        if (!data) return; // अगर डेटा खाली है तो कुछ न करें

        const isMe = data.user === currentUser;
        const msgDiv = document.getElementById('messages');
        let content = `<b>${data.user || "Unknown"}</b><br>`;
        
        // चेक करें कि मैसेज टेक्स्ट है या फोटो
        if(data.type === "image" && data.image) {
            content += `<img src="${data.image}" class="chat-img" onclick="window.open(this.src)">`;
        } else if (data.text) {
            content += data.text;
        } else {
            return; // अगर कुछ भी नहीं है तो मैसेज न दिखाएँ
        }

        const html = `<div class="msg ${isMe ? 'my-msg' : ''}">${content}</div>`;
        msgDiv.innerHTML += html;
        msgDiv.scrollTop = msgDiv.scrollHeight;
    });
}
